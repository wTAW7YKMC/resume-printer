<!--pages/resume/resume.wxml-->
<!-- ÂºïÂÖ•Ëß£ÂÜ≥‰π±Á†ÅÈóÆÈ¢òÁöÑÊ®°Êùø -->
<import src="../../templates/fix-encoding.wxml" />

<view class="page-container">
  <!-- ‰∏™‰∫∫‰ø°ÊÅØÈÉ®ÂàÜ -->
  <view class="section personal-section" wx:if="{{activeTab === 'personal'}}">
    <view class="section-header">
      <template is="fix-encoding" data="{{content: '‰∏™‰∫∫‰ø°ÊÅØ'}}"></template>
    </view>
    <view class="personal-info" wx:if="{{resumeData.personalInfo}}">
      <view class="avatar-container">
        <image class="avatar" src="{{resumeData.personalInfo.avatar || '/images/avatar.jpg'}}" mode="aspectFill"></image>
      </view>
      <view class="info-content">
        <view class="name">
          <template is="fix-encoding" data="{{content: resumeData.personalInfo.name}}"></template>
        </view>
        <view class="title">
          <template is="fix-encoding" data="{{content: resumeData.personalInfo.title}}"></template>
        </view>
        <view class="intro">
          <view class="intro-title">
            <template is="fix-encoding" data="{{content: 'Ëá™Êàë‰ªãÁªç'}}"></template>
          </view>
          <template is="fix-encoding" data="{{content: resumeData.personalInfo.summary}}"></template>
        </view>
        <view class="contact-info">
  <view class="contact-item" bindtap="copyEmail" data-email="{{resumeData.personalInfo.contact[1].value}}">
    <text class="icon">üìß</text>
    <text class="text">
      <template is="fix-encoding" data="{{content: resumeData.personalInfo.contact[1].value}}"></template>
    </text>
  </view>
  <view class="contact-item" bindtap="copyPhone" data-phone="{{resumeData.personalInfo.contact[0].value}}">
    <text class="icon">üì±</text>
    <text class="text">
      <template is="fix-encoding" data="{{content: resumeData.personalInfo.contact[0].value}}"></template>
    </text>
  </view>
  <view class="contact-item" bindtap="openSocialLink" data-url="{{resumeData.personalInfo.contact[2].value}}">
    <text class="icon">üìç</text>
    <text class="text">
      <template is="fix-encoding" data="{{content: resumeData.personalInfo.contact[2].value}}"></template>
    </text>
  </view>
</view>
      </view>
    </view>
  </view>

  <!-- ÊäÄËÉΩÈÉ®ÂàÜ -->
  <view class="section skills-section" wx:if="{{activeTab === 'skills'}}">
    <view class="section-header">
      <template is="fix-encoding" data="{{content: '‰∏ì‰∏öÊäÄËÉΩ'}}"></template>
    </view>
    <view class="skills-content" wx:if="{{resumeData.skills}}">
      <!-- ËÆæËÆ°ÊäÄËÉΩ -->
      <view class="skill-group" wx:if="{{resumeData.skills.design.length > 0}}">
        <view class="skill-group-title">
          <template is="fix-encoding" data="{{content: 'ËÆæËÆ°ÊäÄËÉΩ'}}"></template>
        </view>
        <view class="skill-list">
          <view class="skill-item" wx:for="{{resumeData.skills.design}}" wx:key="name">
            <view class="skill-info">
              <text class="skill-name">
                <template is="fix-encoding" data="{{content: item.name}}"></template>
              </text>
              <text class="skill-level">
                <template is="fix-encoding" data="{{content: item.level}}"></template>
              </text>
            </view>
            <view class="skill-bar">
              <view class="skill-progress" style="width: {{item.percentage}}%; background-color: {{item.color}};"></view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- ÂºÄÂèëÊäÄËÉΩ -->
      <view class="skill-group" wx:if="{{resumeData.skills.development.length > 0}}">
        <view class="skill-group-title">
          <template is="fix-encoding" data="{{content: 'ÂºÄÂèëÊäÄËÉΩ'}}"></template>
        </view>
        <view class="skill-list">
          <view class="skill-item" wx:for="{{resumeData.skills.development}}" wx:key="name">
            <view class="skill-info">
              <text class="skill-name">
                <template is="fix-encoding" data="{{content: item.name}}"></template>
              </text>
              <text class="skill-level">
                <template is="fix-encoding" data="{{content: item.level}}"></template>
              </text>
            </view>
            <view class="skill-bar">
              <view class="skill-progress" style="width: {{item.percentage}}%; background-color: {{item.color}};"></view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- ÂÖ∂‰ªñÊäÄËÉΩ -->
      <view class="skill-group" wx:if="{{resumeData.skills.other.length > 0}}">
        <view class="skill-group-title">
          <template is="fix-encoding" data="{{content: 'ÂÖ∂‰ªñÊäÄËÉΩ'}}"></template>
        </view>
        <view class="skill-list">
          <view class="skill-item" wx:for="{{resumeData.skills.other}}" wx:key="name">
            <view class="skill-info">
              <text class="skill-name">
                <template is="fix-encoding" data="{{content: item.name}}"></template>
              </text>
              <text class="skill-level">
                <template is="fix-encoding" data="{{content: item.level}}"></template>
              </text>
            </view>
            <view class="skill-bar">
              <view class="skill-progress" style="width: {{item.percentage}}%; background-color: {{item.color}};"></view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ÁªèÂéÜÈÉ®ÂàÜÔºàÂêàÂπ∂Â∑•‰ΩúÁªèÂéÜÂíåÊïôËÇ≤ÁªèÂéÜÔºâ -->
  <view class="section experience-section" wx:if="{{activeTab === 'experience'}}">
    <view class="section-header">
      <template is="fix-encoding" data="{{content: '‰∏™‰∫∫ÁªèÂéÜ'}}"></template>
      <view class="expand-all-btn" bindtap="toggleAllExperience">
        <text class="expand-all-text">
          <template is="fix-encoding" data="{{content: 'ÂÖ®ÈÉ®Â±ïÂºÄ/Êî∂Ëµ∑'}}"></template>
        </text>
      </view>
    </view>
    
    <!-- Â∑•‰ΩúÁªèÂéÜ -->
    <view class="subsection" wx:if="{{resumeData.workExperience.length > 0}}">
      <view class="subsection-title">
        <template is="fix-encoding" data="{{content: 'Â∑•‰ΩúÁªèÂéÜ'}}"></template>
      </view>
      <view class="work-list">
        <view class="work-item" wx:for="{{resumeData.workExperience}}" wx:key="id">
          <view class="work-header" bindtap="toggleWorkExperience" data-index="{{index}}">
            <view class="work-info">
              <view class="company">
                <template is="fix-encoding" data="{{content: item.company}}"></template>
              </view>
              <view class="position">
                <template is="fix-encoding" data="{{content: item.position}}"></template>
              </view>
              <view class="period">
                <template is="fix-encoding" data="{{content: item.period}}"></template>
              </view>
            </view>
            <view class="expand-icon {{item.expanded ? 'expanded' : ''}}">‚ñº</view>
          </view>
          <view class="work-detail {{item.expanded ? 'expanded' : ''}}">
            <view class="description">
              <template is="fix-encoding" data="{{content: item.description}}"></template>
            </view>
            <view class="achievements">
              <view class="achievement-item" wx:for="{{item.achievements}}" wx:for-item="achievement" wx:key="*this">
                <template is="fix-encoding" data="{{content: '‚Ä¢ ' + achievement}}"></template>
              </view>
            </view>
            <view class="technologies">
              <text class="tech-label">
                <template is="fix-encoding" data="{{content: 'ÊäÄÊúØÊ†àÔºö'}}"></template>
              </text>
              <view class="tech-list">
                <text class="tech-item" wx:for="{{item.technologies}}" wx:key="*this">
                  <template is="fix-encoding" data="{{content: item}}"></template>
                </text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
    
    <!-- ÊïôËÇ≤ÁªèÂéÜ -->
    <view class="subsection" wx:if="{{resumeData.education.length > 0}}">
      <view class="subsection-title">
        <template is="fix-encoding" data="{{content: 'ÊïôËÇ≤ÁªèÂéÜ'}}"></template>
      </view>
      <view class="education-list">
        <view class="education-item" wx:for="{{resumeData.education}}" wx:key="id">
          <view class="education-header" bindtap="toggleEducation" data-index="{{index}}">
            <view class="education-info">
              <view class="school">
                <template is="fix-encoding" data="{{content: item.school}}"></template>
              </view>
              <view class="major">
                <template is="fix-encoding" data="{{content: item.major}}"></template>
              </view>
              <view class="degree">
                <template is="fix-encoding" data="{{content: item.degree}}"></template>
              </view>
              <view class="period">
                <template is="fix-encoding" data="{{content: item.period}}"></template>
              </view>
            </view>
            <view class="expand-icon {{item.expanded ? 'expanded' : ''}}">‚ñº</view>
          </view>
          <view class="education-detail {{item.expanded ? 'expanded' : ''}}">
            <view class="description">
              <template is="fix-encoding" data="{{content: item.description}}"></template>
            </view>
            <view class="courses" wx:if="{{item.courses.length > 0}}">
              <text class="courses-label">
                <template is="fix-encoding" data="{{content: '‰∏ª‰øÆËØæÁ®ãÔºö'}}"></template>
              </text>
              <view class="course-list">
                <text class="course-item" wx:for="{{item.courses}}" wx:key="*this">
                  <template is="fix-encoding" data="{{content: item}}"></template>
                </text>
              </view>
            </view>
            <view class="achievements" wx:if="{{item.achievements.length > 0}}">
              <text class="achievements-label">
                <template is="fix-encoding" data="{{content: '‰∏ªË¶ÅÊàêÂ∞±Ôºö'}}"></template>
              </text>
              <view class="achievement-list">
                <text class="achievement-item" wx:for="{{item.achievements}}" wx:key="*this">
                  <template is="fix-encoding" data="{{content: item}}"></template>
                </text>
              </view>
            </view>
            <view class="activities" wx:if="{{item.activities.length > 0}}">
              <text class="activities-label">
                <template is="fix-encoding" data="{{content: 'Ê†°Âõ≠Ê¥ªÂä®Ôºö'}}"></template>
              </text>
              <view class="activity-list">
                <text class="activity-item" wx:for="{{item.activities}}" wx:key="*this">
                  <template is="fix-encoding" data="{{content: item}}"></template>
                </text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- È°πÁõÆÁªèÈ™åÈÉ®ÂàÜ -->
  <view class="section projects-section" wx:if="{{activeTab === 'projects'}}">
    <view class="section-header">
      <template is="fix-encoding" data="{{content: 'È°πÁõÆÁªèÈ™å'}}"></template>
    </view>
    <view class="projects-list" wx:if="{{resumeData.projects.length > 0}}">
      <view class="project-item" wx:for="{{resumeData.projects}}" wx:key="id">
        <view class="project-header" bindtap="toggleProject" data-index="{{index}}">
          <view class="project-info">
            <view class="name">
              <template is="fix-encoding" data="{{content: item.name}}"></template>
            </view>
            <view class="role">
              <template is="fix-encoding" data="{{content: item.role}}"></template>
            </view>
            <view class="period">
              <template is="fix-encoding" data="{{content: item.period}}"></template>
            </view>
          </view>
          <view class="expand-icon {{item.expanded ? 'expanded' : ''}}">‚ñº</view>
        </view>
        <view class="project-detail {{item.expanded ? 'expanded' : ''}}">
          <view class="description">
            <template is="fix-encoding" data="{{content: item.description}}"></template>
          </view>
          <view class="features" wx:if="{{item.features.length > 0}}">
            <text class="features-label">
              <template is="fix-encoding" data="{{content: 'ÂäüËÉΩÁâπÁÇπÔºö'}}"></template>
            </text>
            <view class="feature-list">
              <text class="feature-item" wx:for="{{item.features}}" wx:key="*this">
                <template is="fix-encoding" data="{{content: item}}"></template>
              </text>
            </view>
          </view>
          <view class="achievements" wx:if="{{item.achievements.length > 0}}">
            <text class="achievements-label">
              <template is="fix-encoding" data="{{content: 'È°πÁõÆÊàêÊûúÔºö'}}"></template>
            </text>
            <view class="achievement-list">
              <text class="achievement-item" wx:for="{{item.achievements}}" wx:key="*this">
                <template is="fix-encoding" data="{{content: item}}"></template>
              </text>
            </view>
          </view>
          <view class="technologies">
            <text class="tech-label">
              <template is="fix-encoding" data="{{content: 'ÊäÄÊúØÊ†àÔºö'}}"></template>
            </text>
            <view class="tech-list">
              <text class="tech-item" wx:for="{{item.technologies}}" wx:key="*this">
                <template is="fix-encoding" data="{{content: item}}"></template>
              </text>
            </view>
          </view>
          <view class="links" wx:if="{{item.links.length > 0}}">
            <text class="links-label">
              <template is="fix-encoding" data="{{content: 'Áõ∏ÂÖ≥ÈìæÊé•Ôºö'}}"></template>
            </text>
            <view class="link-list">
              <view class="link-item" wx:for="{{item.links}}" wx:key="name" bindtap="openSocialLink" data-url="{{item.url}}">
                <text class="link-text">
                  <template is="fix-encoding" data="{{content: item.name}}"></template>
                </text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- Â∫ïÈÉ®ÂØºËà™ -->
  <view class="tab-bar">
    <view class="tab-item {{activeTab === 'personal' ? 'active' : ''}}" bindtap="switchTab" data-tab="personal">
      <text class="tab-text">
        <template is="fix-encoding" data="{{content: '‰∏™‰∫∫‰ø°ÊÅØ'}}"></template>
      </text>
    </view>
    <view class="tab-item {{activeTab === 'skills' ? 'active' : ''}}" bindtap="switchTab" data-tab="skills">
      <text class="tab-text">
        <template is="fix-encoding" data="{{content: 'ÊäÄËÉΩ'}}"></template>
      </text>
    </view>
    <view class="tab-item {{activeTab === 'experience' ? 'active' : ''}}" bindtap="switchTab" data-tab="experience">
      <text class="tab-text">
        <template is="fix-encoding" data="{{content: 'ÁªèÂéÜ'}}"></template>
      </text>
    </view>
    <view class="tab-item {{activeTab === 'projects' ? 'active' : ''}}" bindtap="switchTab" data-tab="projects">
      <text class="tab-text">
        <template is="fix-encoding" data="{{content: 'È°πÁõÆ'}}"></template>
      </text>
    </view>
  </view>
</view>