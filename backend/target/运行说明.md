# 简历网站留言后端服务 - JSON文件存储版

## 文件说明

- `resume-message-json.jar`: 完整的应用程序包，包含所有依赖
- `run.bat`: Windows批处理文件，双击即可启动服务
- `messages.json`: 留言数据存储文件（首次运行时自动创建）
- `JsonMessageApplication.java`: 应用程序源代码
- `CreateJsonMessageJar.java`: JAR包生成工具源代码

## 特点

1. **使用本地JSON文件存储留言数据**
   - 无需数据库，留言数据存储在本地JSON文件中
   - 数据文件位置：`f:\数智编程\resume printer\backend\target\messages.json`
   - 支持并发访问，使用读写锁保证数据一致性

2. **完全自包含JAR包**
   - 所有依赖已嵌入，无需额外下载
   - 包含Gson库用于JSON数据处理
   - 不依赖任何数据库或DLL文件

3. **简单易用**
   - 双击run.bat即可启动
   - 无需配置环境变量
   - 无需Maven或其他构建工具
   - 零配置，开箱即用

## 运行方法

### 方法1：双击运行（推荐）
直接双击`run.bat`文件即可启动服务

### 方法2：命令行运行
```cmd
cd /d "f:\数智编程\resume printer\backend\target"
java -jar resume-message-json.jar
```

## API接口

服务启动后，可通过以下接口访问：

1. **提交留言**
   - 请求地址：`POST http://localhost:8080/api/resume/message`
   - 请求格式：`application/json`
   - 请求参数：
     ```json
     {
       "name": "张三",
       "email": "zhangsan@example.com",
       "content": "这是一条测试留言"
     }
     ```
   - 响应示例：
     ```json
     {"code":200,"msg":"留言提交成功"}
     ```

2. **获取留言列表**
   - 请求地址：`GET http://localhost:8080/api/resume/message/list`
   - 响应示例：
     ```json
     {
       "code": 200,
       "data": [
         {
           "id": 1,
           "name": "张三",
           "email": "zhangsan@example.com",
           "content": "这是一条测试留言",
           "createTime": "2024-01-01T12:00:00"
         }
       ]
     }
     ```

3. **API说明页面**
   - 访问地址：`GET http://localhost:8080/`
   - 查看完整的API文档

## 数据存储

- 留言数据存储在`messages.json`文件中
- 文件位置：`f:\数智编程\resume printer\backend\target\messages.json`
- 首次运行时自动创建
- 数据格式为JSON数组，每条留言包含id、name、email、content和createTime字段
- 应用程序使用读写锁保证并发访问时的数据一致性

## 常见问题

1. **端口占用**
   - 如果8080端口被占用，请修改JsonMessageApplication.java中的端口号

2. **权限问题**
   - 确保当前用户有读写目标目录的权限
   - 确保应用程序有权限创建和修改messages.json文件

3. **JAR包无法启动**
   - 检查Java版本是否兼容（建议使用Java 8或更高版本）
   - 确保resume-message-json.jar文件完整且未损坏

4. **数据丢失**
   - messages.json文件存储在应用程序目录中，请勿手动删除
   - 建议定期备份messages.json文件

5. **并发访问**
   - 应用程序已实现读写锁机制，支持多线程并发访问
   - 如果遇到数据不一致，重启应用程序即可

## 技术支持

如有问题，请检查：
1. Java环境是否正确安装和配置
2. 当前目录是否有写入权限
3. 8080端口是否被其他程序占用
4. messages.json文件是否存在且可读写

## 与SQL Server版本的比较

| 特性 | JSON文件存储版 | SQL Server版 |
|------|---------------|-------------|
| 依赖 | 仅需Java环境 | 需要Java + SQL Server |
| 配置 | 零配置 | 需要配置数据库连接 |
| 数据存储 | 本地JSON文件 | SQL Server数据库 |
| 性能 | 适合小规模应用 | 适合大规模应用 |
| 可靠性 | 依赖文件系统 | 数据库事务保证 |
| 部署复杂度 | 极低 | 中等 |

## 开发说明

如需修改或重新构建JAR包：

1. 修改JsonMessageApplication.java源代码
2. 编译：`javac -cp gson-2.9.0.jar JsonMessageApplication.java`
3. 生成JAR：`java CreateJsonMessageJar`

注意：编译时需要gson-2.9.0.jar库文件，CreateJsonMessageJar会自动下载此库。